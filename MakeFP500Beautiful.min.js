(function(){function f(){var a=$(this).attr("alt");"all"==a?$(this).attr("title","all: 500"):$(this).attr("title",a+": "+$("img[alt*='"+a+"']").length)}function g(a){$("#maphr").css("width","755px");a.preventDefault();a=$(this).attr("alt");d(a)}function d(a){var b=[];b.all=0;b.Politics=144;b["Bully Pulpit"]=239;b.Force=359;b.Brains=469;b.Money=544;b.Good=634;b.Evil=704;var c=[];c.all=0;c.Politics=530;c["Bully Pulpit"]=405;c.Force=300;c.Brains=212;c.Money=132;c.Good=62;c.Evil=-8;b={width:755-(b[a]+
c[a])+"px","margin-left":b[a],"margin-right":c[a]};$("#maphr").css(b);"all"==a?$("tr").fadeIn(300):($("tr:not(thead tr)").fadeOut(600),$("img[alt='"+a+"']").parent().parent().fadeIn(600))}function h(){var a=$("img[alt='Politics']").parent().parent().parent().before("<thead><tr><th>Person</th><th>Role</th><th>Location</th><th>Categories</th></tr></thead>");$("th").css({"font-family":"Arial","text-transform":"Capitalize",cursor:"pointer","text-align":"justify"});$(a.parent()).tablesorter({})}function j(){google.load("visualization",
"1",{callback:k,packages:["corechart","geochart","table"]})}function k(){$("#maphr").after("<div id='mapchartctr'><div id='chart_500' style='display:none'></div></div>");$("#chart_500").before("<a id='chart_500_shower' style='text-decoration: none;' href='#'>show chart</a>");$("#chart_500").before("<a id='chart_500_hider' style='text-decoration: none;display:none' href='#'>hide chart</a>");$("#chart_500_shower").click(function(a){a.preventDefault();$("#chart_500").toggle(600);$(this).hide();$("#chart_500_hider").show()});
$("#chart_500_hider").click(function(a){a.preventDefault();$("#chart_500").toggle(600);$(this).hide();$("#chart_500_shower").show()});var a=[];a.push(["Category","Total"]);$("area").each(function(){var b=$(this).attr("alt");"all"!=b&&a.push([b,$("img[alt*='"+b+"']").length])});var b=new google.visualization.DataTable,b=google.visualization.arrayToDataTable(a),c=new google.visualization.PieChart(document.getElementById("chart_500"));google.visualization.events.addListener(c,"select",function(){var b=
c.getSelection()[0].row;d(a[b+1][0])});c.draw(b,{title:"FP.com's 500 most powerful people",width:400,height:300})}function e(){script=document.createElement("script");script.src="http://cdn.jsdelivr.net/tablesorter/2.0.5b/jquery.tablesorter.min.js";script.onload=h;document.body.appendChild(script);gscript=document.createElement("script");gscript.src="https://www.google.com/jsapi?key=AIzaSyB2uiiMjxrpj5X4_B9kwmCg6PQ3Glhq1os";gscript.onload=j;document.body.appendChild(gscript);$("img[src*='130423_0_key-755.jpg']").replaceWith("<img id='mostpowerful_500' src='http://www.foreignpolicy.com/files/fp_uploaded_images/130423_0_key-755.jpg' usemap='#map_powerful_500' border='0' width='755' height='26' alt='' />");
$("img[src*='130423_0_key-755.jpg']").after("<map id='map_powerful_500' name='map_powerful_500'> <area shape='rect' coords='43,0,134,21' href='#' alt='all' title='all'    /> <area shape='rect' coords='142,0,226,21' href='#' alt='Politics'   title='Politics'    /><area shape='rect' coords='238,0,346,21' href='#' alt='Bully Pulpit'      title='Bully Pulpit'    /><area shape='rect' coords='356,0,455,21' href='#' alt='Force'      title='Force'    /><area shape='rect' coords='465,0,537,21' href='#' alt='Brains'     title='Brains'    /><area shape='rect' coords='544,0,619,21' href='#' alt='Money'      title='Money'    /><area shape='rect' coords='631,0,688,21' href='#' alt='Good'       title='Good'    /><area shape='rect' coords='704,0,750,21' href='#' alt='Evil'       title='Evil'    /></map>");
$("img[src*='130423_0_key-755.jpg']").after("<hr id='maphr' />");$("#maphr").css({border:1,color:"#f00","background-color":"#f00",height:"5px",margin:"1em 0",width:"755px"});$("map area").click(g);$("map area").mouseover(f)}($=window.jQuery)?e():(script=document.createElement("script"),script.src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js",script.onload=e,document.body.appendChild(script))})();
